<div
  class="flex h-screen w-screen flex-col items-center justify-center bg-gray-200 dark:bg-gray-800"
>
  <div class="text-5xl text-gray-600 dark:text-gray-200">关灯游戏</div>
  <div
    class="mt-5 flex flex-col items-center justify-center rounded-md text-xl"
  >
    <div
      class="rounded-md bg-green-200 p-5 text-gray-800 dark:bg-green-800 dark:text-gray-200"
    >
      <div>1️⃣ 点击格子，开启/关闭💡</div>
      <div>2️⃣ 点击格子时，相邻格子的灯也会一起切换</div>
      <div>3️⃣ 目标是用最少的步数关闭棋盘上所有的💡</div>
    </div>
  </div>
  <div
    class="mt-5 flex h-1/2 min-h-[500px] w-1/2 min-w-[500px] flex-col items-center justify-center rounded-lg border-2 border-solid border-gray-400"
  >
    @for (cs of board(); track $index; let row = $index) {
      <div class="flex w-full items-center justify-center">
        @for (c of cs; track $index; let col = $index) {
          <div
            class="m-1 h-28 w-28 transform cursor-pointer select-none border-2 border-solid border-white shadow-lg transition-all duration-500 ease-in-out hover:scale-105 hover:shadow-2xl"
            [ngClass]="{
              'bg-gray-600 dark:bg-gray-500': c == 0,
              'bg-yellow-400 dark:bg-orange-400': c == 1,
            }"
            (click)="toggleLight(row, col)"
          >
            <span
              *ngIf="c == 1"
              class="flex h-full w-full items-center justify-center text-5xl"
              >💡</span
            >
          </div>
        }
      </div>
    }
    <div
      class="mt-5 flex items-center justify-center text-xl text-gray-800 dark:text-gray-200"
    >
      已操作步数： {{ steps }}
    </div>
    <div
      class="my-5 flex items-center justify-center text-xl text-gray-800 dark:text-gray-200"
    >
      当前还需要关闭的💡： {{ count() }}
    </div>
  </div>
</div>

<div
  *ngIf="showModal"
  class="absolute left-0 top-0 flex h-full w-full items-center justify-center bg-gray-800 bg-opacity-80 dark:bg-gray-200"
>
  <div
    class="flex h-[660px] w-[660px] flex-col items-center justify-center rounded-2xl bg-gray-800"
  >
    <div class="my-5 text-5xl text-gray-200">🎉🎉🎉恭喜🎉🎉🎉</div>
    <div class="my-5 text-3xl text-gray-200">
      经过{{ steps }}步努力，您已关闭所有灯
    </div>
    <button
      (click)="restart()"
      class="my-5 rounded-md border border-solid border-gray-200 p-5 text-3xl text-gray-200 hover:bg-gray-600"
      type="button"
    >
      重新开始
    </button>
  </div>
</div>
